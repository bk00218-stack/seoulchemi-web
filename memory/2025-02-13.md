# 2025-02-13

## WOS(케미렌즈 웹주문시스템) → 렌즈초이스 상품 데이터 연동

### 작업 내용
1. **WOS에서 Chemi 브랜드 상품 추출**
   - Bearer 토큰 인증으로 API 호출
   - 36개 품목 추출 (PERFECT UV, IR, 양면비구면 등)
   - 품목별 도수 범위(SPH, CYL) 포함

2. **이미지 다운로드**
   - 21개 상품 이미지 다운로드
   - 저장: `chemi_images/` → `mobile-glass/public/images/chemi/`
   - 파일명: ERP코드.jpg (예: 102506.jpg)

3. **렌즈초이스 DB 연동**
   - 13개 상품 신규 추가 (PERFECT UV 7개 + IR 6개)
   - ERP 코드, 굴절률, 이미지 URL 포함
   - Product 테이블 id 247~259

### 파일
- `chemi_products.json` - 추출 데이터 (간략)
- `chemi_products_full.json` - 전체 데이터 (도수표 포함)
- `import-retina-products.js` - import 스크립트

### 배포 완료
- Git commit: `feat: WOS 상품 데이터 연동 (케미 PERFECT UV, IR 13개 추가)`
- Push: main → seoulchemi-web.git
- Vercel 자동 배포 성공
- 라이브 확인: https://mobile-glass.vercel.app/products/items (PERFECT UV 검색)

### TODO
- [ ] 나머지 카테고리 (양면비구면 23개) 추가
- [ ] 기존 케미 상품 21개 (id 22-42) 정리 - 중복될 수 있음
- [ ] 도수표 범위 DiopterRange 테이블 연동
- [ ] 가격 정보 연동 (별도 작업)

### API 정보 (레티나)
- Base: `http://wos.chemilens.co.kr`
- 상품목록: `/nuri/api/v1/store-order-prod-prods?storeId=666&prodClassifCd=2003001&storeClassifCd=20&brandCd=2000055001&prodLevel1TypeCd={카테고리}`
- 상품상세: `/nuri/api/v1/prods/{prodId}`
- 도수표: `/nuri/api/v1/diopter-groups/prod?prodId={prodId}`
- 이미지: `/nuri/api/files/{fileId}/download`
- 인증: Bearer 토큰 (localStorage.accessToken)
