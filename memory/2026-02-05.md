# 2026-02-05 작업 기록

## 서울케미 웹앱 (LensChoice/mobile-glass) 작업

### 할인 시스템 추가
- **DB 스키마 추가:**
  - `Store.discountRate` - 거래처 기본 할인율
  - `StoreBrandDiscount` - 거래처별 브랜드 할인
  - `StoreProductDiscount` - 거래처별 상품 할인
  - `StoreProductPrice` - 거래처별 상품 특수단가

- **가격 적용 우선순위:** 특수단가 > 브랜드별 > 상품별 > 기본할인율 > 정가

- **API 추가:**
  - `GET/PUT/POST/DELETE /api/stores/[id]/discounts` - 할인 설정 CRUD
  - `GET /api/stores/[id]/price?productId=123` - 가격 계산

- **UI 추가:**
  - `/admin/stores/[id]/discounts` - 거래처별 할인 설정 페이지
  - 거래처 목록에 [할인] 버튼 추가

- **유틸리티:**
  - `src/lib/priceCalculator.ts` - 가격 계산 로직

- **미수금 연동:** 할인된 가격으로 미수금 잡힘
  - 주문 생성 → 할인가 자동 계산
  - 주문 출고/확정 → 할인된 금액으로 미수금 추가
  - 주문 취소 → 미수금 차감

### 관리자 주문등록 페이지 수정
- **새 플로우:** 거래처 → 브랜드 → 상품 → 도수표 수량 입력
- 장바구니 제거, 바로 접수대기로 등록
- 주문 접수 시 출고지시서 자동 출력 (iframe 방식)

### OlwsPro 프린터 설정 확인
- **경로:** `C:\Aram\OlwsPro 케미\`
- **프린터:** BIXOLON SRP-350III (POS 영수증 프린터)
- **네트워크:** `\\Chemi-03\BIXOLON SRP-350III`
- **출고지시서 양식:** `여벌출고지시서(350).frf` (FastReport)
- **설정파일:** `Client_SetUp.Ini`

### TODO
- 웹앱에서 BIXOLON 프린터로 직접 출력하는 방법 구현 필요
  - Windows 기본 프린터 설정 확인 또는
  - 로컬 프린트 서버 구축
