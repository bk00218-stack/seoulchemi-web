# 2026-02-14 작업 기록

## 상품 등록 페이지 개선 (Zeus 요청)

### 변경사항
1. **브랜드 관리 모달 추가**
   - 브랜드 추가/수정/삭제 기능
   - 재고관리 방식 설정 (개별/공유/없음)
   - 활성/비활성 상태 관리
   - 등록된 상품 개수 표시
   - 상품이 있는 브랜드는 삭제 방지

2. **상품 등록/수정 모달 개선**
   - 상품코드 표시 (수정시)
   - 상품분류 필드 추가 (단초점, 다초점 등)
   - 가격 섹션 개선 (판매가, 매입가, 마진율)
   - 상품 복사 기능
   - 상품 삭제 기능 (확인 포함)
   - 도수 옵션 요약 표시 (수정시)

3. **상품 목록 개선**
   - 도수(옵션) 개수 컬럼 추가
   - 브랜드 목록에 수정 버튼 추가
   - 비활성 브랜드 표시 개선

4. **API 수정**
   - `/api/products`: 옵션 개수 포함하도록 수정
   - `/api/brands`: 응답 형식 통일 ({brands: [...]})

### 커밋
- `63b31a9` - Improve product page: brand modal, product copy/delete, options count

---

## 상품 계층 구조 추가 (Zeus 요청 #2)

### 새로운 구조
```
대분류 (MainCategory)
  └── 브랜드 (Brand)
        └── 품목 (ProductLine)
              └── 상품 (Product)
                    └── 도수옵션 (ProductOption)
```

### 대분류 종류
- 안경렌즈 여벌 (SPARE)
- 안경렌즈 RX (RX)
- 콘택트렌즈 (CONTACT)
- 착색 (TINT)

### DB 스키마 변경
- `MainCategory` 모델 추가
- `ProductLine` 모델 추가
- `Brand`에 `categoryId` 추가
- `Product`에 `productLineId` 추가

### API 추가/수정
- `/api/categories` - 대분류 CRUD
- `/api/product-lines` - 품목 CRUD
- `/api/brands` - categoryId 필터 추가
- `/api/products` - productLineId 필터 추가

### 커밋
- `13af55a` - Add product hierarchy: MainCategory > Brand > ProductLine > Product

### 다음 할 일
- UI 업데이트 (4단계 계층 표시)
- 초기 대분류 데이터 시드 실행
- 기존 브랜드/상품 마이그레이션
